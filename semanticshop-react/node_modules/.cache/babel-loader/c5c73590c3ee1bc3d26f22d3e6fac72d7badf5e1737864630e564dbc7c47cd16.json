{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8081/api/carrito';\nconst cartService = {\n  /**\r\n   * Agregar producto al carrito (backend)\r\n   */\n  agregarProducto: async (productoId, cantidad = 1) => {\n    try {\n      const response = await axios.post(`${API_URL}/agregar`, {\n        productoId,\n        cantidad\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error agregando producto:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Obtener carrito del backend\r\n   */\n  obtenerCarrito: async () => {\n    try {\n      const response = await axios.get(API_URL);\n      return response.data;\n    } catch (error) {\n      console.error('Error obteniendo carrito:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Actualizar cantidad de un producto\r\n   */\n  actualizarCantidad: async (productoId, cantidad) => {\n    try {\n      const response = await axios.put(`${API_URL}/actualizar/${productoId}`, {\n        cantidad\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error actualizando cantidad:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Eliminar producto del carrito\r\n   */\n  eliminarProducto: async productoId => {\n    try {\n      const response = await axios.delete(`${API_URL}/eliminar/${productoId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error eliminando producto:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Limpiar todo el carrito\r\n   */\n  limpiarCarrito: async () => {\n    try {\n      const response = await axios.delete(`${API_URL}/limpiar`);\n      return response.data;\n    } catch (error) {\n      console.error('Error limpiando carrito:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Sincronizar carrito local con backend\r\n   * (envía todos los items del localStorage al backend)\r\n   */\n  sincronizarCarrito: async cartItems => {\n    try {\n      // Primero limpiar el carrito en el backend\n      await cartService.limpiarCarrito();\n\n      // Luego agregar cada producto\n      const promises = cartItems.map(item => cartService.agregarProducto(item.id, item.cantidad));\n      await Promise.all(promises);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error sincronizando carrito:', error);\n      throw error;\n    }\n  }\n};\nexport default cartService;","map":{"version":3,"names":["axios","API_URL","cartService","agregarProducto","productoId","cantidad","response","post","data","error","console","obtenerCarrito","get","actualizarCantidad","put","eliminarProducto","delete","limpiarCarrito","sincronizarCarrito","cartItems","promises","map","item","id","Promise","all","success"],"sources":["C:/Users/User/Documents/ANDREA PROYECTOS/WebSemantica/semanticshop-react/src/services/cartService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8081/api/carrito';\r\n\r\nconst cartService = {\r\n  /**\r\n   * Agregar producto al carrito (backend)\r\n   */\r\n  agregarProducto: async (productoId, cantidad = 1) => {\r\n    try {\r\n      const response = await axios.post(`${API_URL}/agregar`, {\r\n        productoId,\r\n        cantidad,\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error agregando producto:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Obtener carrito del backend\r\n   */\r\n  obtenerCarrito: async () => {\r\n    try {\r\n      const response = await axios.get(API_URL);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error obteniendo carrito:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Actualizar cantidad de un producto\r\n   */\r\n  actualizarCantidad: async (productoId, cantidad) => {\r\n    try {\r\n      const response = await axios.put(`${API_URL}/actualizar/${productoId}`, {\r\n        cantidad,\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error actualizando cantidad:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Eliminar producto del carrito\r\n   */\r\n  eliminarProducto: async (productoId) => {\r\n    try {\r\n      const response = await axios.delete(`${API_URL}/eliminar/${productoId}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error eliminando producto:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Limpiar todo el carrito\r\n   */\r\n  limpiarCarrito: async () => {\r\n    try {\r\n      const response = await axios.delete(`${API_URL}/limpiar`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error limpiando carrito:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Sincronizar carrito local con backend\r\n   * (envía todos los items del localStorage al backend)\r\n   */\r\n  sincronizarCarrito: async (cartItems) => {\r\n    try {\r\n      // Primero limpiar el carrito en el backend\r\n      await cartService.limpiarCarrito();\r\n\r\n      // Luego agregar cada producto\r\n      const promises = cartItems.map(item =>\r\n        cartService.agregarProducto(item.id, item.cantidad)\r\n      );\r\n\r\n      await Promise.all(promises);\r\n      \r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Error sincronizando carrito:', error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default cartService;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,mCAAmC;AAEnD,MAAMC,WAAW,GAAG;EAClB;AACF;AACA;EACEC,eAAe,EAAE,MAAAA,CAAOC,UAAU,EAAEC,QAAQ,GAAG,CAAC,KAAK;IACnD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAAC,GAAGN,OAAO,UAAU,EAAE;QACtDG,UAAU;QACVC;MACF,CAAC,CAAC;MACF,OAAOC,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;AACF;AACA;EACEE,cAAc,EAAE,MAAAA,CAAA,KAAY;IAC1B,IAAI;MACF,MAAML,QAAQ,GAAG,MAAMN,KAAK,CAACY,GAAG,CAACX,OAAO,CAAC;MACzC,OAAOK,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;AACF;AACA;EACEI,kBAAkB,EAAE,MAAAA,CAAOT,UAAU,EAAEC,QAAQ,KAAK;IAClD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACc,GAAG,CAAC,GAAGb,OAAO,eAAeG,UAAU,EAAE,EAAE;QACtEC;MACF,CAAC,CAAC;MACF,OAAOC,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;AACF;AACA;EACEM,gBAAgB,EAAE,MAAOX,UAAU,IAAK;IACtC,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMN,KAAK,CAACgB,MAAM,CAAC,GAAGf,OAAO,aAAaG,UAAU,EAAE,CAAC;MACxE,OAAOE,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;AACF;AACA;EACEQ,cAAc,EAAE,MAAAA,CAAA,KAAY;IAC1B,IAAI;MACF,MAAMX,QAAQ,GAAG,MAAMN,KAAK,CAACgB,MAAM,CAAC,GAAGf,OAAO,UAAU,CAAC;MACzD,OAAOK,QAAQ,CAACE,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,MAAMA,KAAK;IACb;EACF,CAAC;EAED;AACF;AACA;AACA;EACES,kBAAkB,EAAE,MAAOC,SAAS,IAAK;IACvC,IAAI;MACF;MACA,MAAMjB,WAAW,CAACe,cAAc,CAAC,CAAC;;MAElC;MACA,MAAMG,QAAQ,GAAGD,SAAS,CAACE,GAAG,CAACC,IAAI,IACjCpB,WAAW,CAACC,eAAe,CAACmB,IAAI,CAACC,EAAE,EAAED,IAAI,CAACjB,QAAQ,CACpD,CAAC;MAED,MAAMmB,OAAO,CAACC,GAAG,CAACL,QAAQ,CAAC;MAE3B,OAAO;QAAEM,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOjB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,MAAMA,KAAK;IACb;EACF;AACF,CAAC;AAED,eAAeP,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
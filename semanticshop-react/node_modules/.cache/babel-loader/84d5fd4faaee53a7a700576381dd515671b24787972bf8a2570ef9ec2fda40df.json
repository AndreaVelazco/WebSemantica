{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Laboratorio\\\\WebSemantica\\\\semanticshop-react\\\\src\\\\context\\\\CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart debe ser usado dentro de CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cartItems, setCartItems] = useState([]);\n\n  // Cargar carrito desde localStorage al iniciar\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        setCartItems(JSON.parse(savedCart));\n      } catch (error) {\n        console.error('Error cargando carrito:', error);\n      }\n    }\n  }, []);\n\n  // Guardar carrito en localStorage cada vez que cambia\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  // Agregar producto al carrito\n  const addToCart = (product, quantity = 1) => {\n    setCartItems(prevItems => {\n      const existingItem = prevItems.find(item => item.id === product.id);\n      if (existingItem) {\n        // Si el producto ya existe, aumentar cantidad\n        return prevItems.map(item => item.id === product.id ? {\n          ...item,\n          cantidad: item.cantidad + quantity\n        } : item);\n      } else {\n        // Si es nuevo, agregarlo\n        return [...prevItems, {\n          ...product,\n          cantidad: quantity\n        }];\n      }\n    });\n  };\n\n  // Actualizar cantidad de un producto\n  const updateQuantity = (productId, newQuantity) => {\n    if (newQuantity < 1) {\n      removeFromCart(productId);\n      return;\n    }\n    setCartItems(prevItems => prevItems.map(item => item.id === productId ? {\n      ...item,\n      cantidad: Math.min(newQuantity, item.stock || 999)\n    } : item));\n  };\n\n  // Incrementar cantidad\n  const incrementQuantity = productId => {\n    setCartItems(prevItems => prevItems.map(item => item.id === productId && item.cantidad < (item.stock || 999) ? {\n      ...item,\n      cantidad: item.cantidad + 1\n    } : item));\n  };\n\n  // Decrementar cantidad\n  const decrementQuantity = productId => {\n    setCartItems(prevItems => {\n      const item = prevItems.find(i => i.id === productId);\n      if (item && item.cantidad <= 1) {\n        return prevItems.filter(i => i.id !== productId);\n      }\n      return prevItems.map(i => i.id === productId ? {\n        ...i,\n        cantidad: i.cantidad - 1\n      } : i);\n    });\n  };\n\n  // Eliminar producto del carrito\n  const removeFromCart = productId => {\n    setCartItems(prevItems => prevItems.filter(item => item.id !== productId));\n  };\n\n  // Limpiar todo el carrito\n  const clearCart = () => {\n    setCartItems([]);\n  };\n\n  // Verificar si un producto está en el carrito\n  const isInCart = productId => {\n    return cartItems.some(item => item.id === productId);\n  };\n\n  // Obtener cantidad de un producto en el carrito\n  const getItemQuantity = productId => {\n    const item = cartItems.find(item => item.id === productId);\n    return item ? item.cantidad : 0;\n  };\n\n  // Calcular subtotal\n  const getSubtotal = () => {\n    return cartItems.reduce((sum, item) => sum + (item.precio || 0) * item.cantidad, 0);\n  };\n\n  // Calcular envío\n  const getShipping = () => {\n    const subtotal = getSubtotal();\n    return subtotal > 1000 ? 0 : 29.99;\n  };\n\n  // Calcular impuesto (IGV 18%)\n  const getTax = () => {\n    return getSubtotal() * 0.18;\n  };\n\n  // Calcular total\n  const getTotal = () => {\n    return getSubtotal() + getShipping() + getTax();\n  };\n\n  // Obtener cantidad total de items\n  const getTotalItems = () => {\n    return cartItems.reduce((sum, item) => sum + item.cantidad, 0);\n  };\n  const value = {\n    cartItems,\n    addToCart,\n    updateQuantity,\n    incrementQuantity,\n    decrementQuantity,\n    removeFromCart,\n    clearCart,\n    isInCart,\n    getItemQuantity,\n    getSubtotal,\n    getShipping,\n    getTax,\n    getTotal,\n    getTotalItems\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 10\n  }, this);\n};\n_s2(CartProvider, \"jdONvkEabzLc64SbXgqXBHRMg9M=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","useCart","_s","context","Error","CartProvider","children","_s2","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","error","console","setItem","stringify","addToCart","product","quantity","prevItems","existingItem","find","item","id","map","cantidad","updateQuantity","productId","newQuantity","removeFromCart","Math","min","stock","incrementQuantity","decrementQuantity","i","filter","clearCart","isInCart","some","getItemQuantity","getSubtotal","reduce","sum","precio","getShipping","subtotal","getTax","getTotal","getTotalItems","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Laboratorio/WebSemantica/semanticshop-react/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart debe ser usado dentro de CartProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  // Cargar carrito desde localStorage al iniciar\r\n  useEffect(() => {\r\n    const savedCart = localStorage.getItem('cart');\r\n    if (savedCart) {\r\n      try {\r\n        setCartItems(JSON.parse(savedCart));\r\n      } catch (error) {\r\n        console.error('Error cargando carrito:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Guardar carrito en localStorage cada vez que cambia\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  // Agregar producto al carrito\r\n  const addToCart = (product, quantity = 1) => {\r\n    setCartItems(prevItems => {\r\n      const existingItem = prevItems.find(item => item.id === product.id);\r\n      \r\n      if (existingItem) {\r\n        // Si el producto ya existe, aumentar cantidad\r\n        return prevItems.map(item =>\r\n          item.id === product.id\r\n            ? { ...item, cantidad: item.cantidad + quantity }\r\n            : item\r\n        );\r\n      } else {\r\n        // Si es nuevo, agregarlo\r\n        return [...prevItems, { ...product, cantidad: quantity }];\r\n      }\r\n    });\r\n  };\r\n\r\n  // Actualizar cantidad de un producto\r\n  const updateQuantity = (productId, newQuantity) => {\r\n    if (newQuantity < 1) {\r\n      removeFromCart(productId);\r\n      return;\r\n    }\r\n\r\n    setCartItems(prevItems =>\r\n      prevItems.map(item =>\r\n        item.id === productId\r\n          ? { ...item, cantidad: Math.min(newQuantity, item.stock || 999) }\r\n          : item\r\n      )\r\n    );\r\n  };\r\n\r\n  // Incrementar cantidad\r\n  const incrementQuantity = (productId) => {\r\n    setCartItems(prevItems =>\r\n      prevItems.map(item =>\r\n        item.id === productId && item.cantidad < (item.stock || 999)\r\n          ? { ...item, cantidad: item.cantidad + 1 }\r\n          : item\r\n      )\r\n    );\r\n  };\r\n\r\n  // Decrementar cantidad\r\n  const decrementQuantity = (productId) => {\r\n    setCartItems(prevItems => {\r\n      const item = prevItems.find(i => i.id === productId);\r\n      if (item && item.cantidad <= 1) {\r\n        return prevItems.filter(i => i.id !== productId);\r\n      }\r\n      return prevItems.map(i =>\r\n        i.id === productId\r\n          ? { ...i, cantidad: i.cantidad - 1 }\r\n          : i\r\n      );\r\n    });\r\n  };\r\n\r\n  // Eliminar producto del carrito\r\n  const removeFromCart = (productId) => {\r\n    setCartItems(prevItems => prevItems.filter(item => item.id !== productId));\r\n  };\r\n\r\n  // Limpiar todo el carrito\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  // Verificar si un producto está en el carrito\r\n  const isInCart = (productId) => {\r\n    return cartItems.some(item => item.id === productId);\r\n  };\r\n\r\n  // Obtener cantidad de un producto en el carrito\r\n  const getItemQuantity = (productId) => {\r\n    const item = cartItems.find(item => item.id === productId);\r\n    return item ? item.cantidad : 0;\r\n  };\r\n\r\n  // Calcular subtotal\r\n  const getSubtotal = () => {\r\n    return cartItems.reduce((sum, item) => sum + (item.precio || 0) * item.cantidad, 0);\r\n  };\r\n\r\n  // Calcular envío\r\n  const getShipping = () => {\r\n    const subtotal = getSubtotal();\r\n    return subtotal > 1000 ? 0 : 29.99;\r\n  };\r\n\r\n  // Calcular impuesto (IGV 18%)\r\n  const getTax = () => {\r\n    return getSubtotal() * 0.18;\r\n  };\r\n\r\n  // Calcular total\r\n  const getTotal = () => {\r\n    return getSubtotal() + getShipping() + getTax();\r\n  };\r\n\r\n  // Obtener cantidad total de items\r\n  const getTotalItems = () => {\r\n    return cartItems.reduce((sum, item) => sum + item.cantidad, 0);\r\n  };\r\n\r\n  const value = {\r\n    cartItems,\r\n    addToCart,\r\n    updateQuantity,\r\n    incrementQuantity,\r\n    decrementQuantity,\r\n    removeFromCart,\r\n    clearCart,\r\n    isInCart,\r\n    getItemQuantity,\r\n    getSubtotal,\r\n    getShipping,\r\n    getTax,\r\n    getTotal,\r\n    getTotalItems,\r\n  };\r\n\r\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}